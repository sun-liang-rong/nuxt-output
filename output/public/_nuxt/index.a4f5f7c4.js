import{a as A,i as h,n as C,t as g,b as E}from"./index.af6de1f4.js";import{E as w,j as y,z as S,G as M,k as T}from"./entry.2d5a7698.js";function _(t){var e;const n=g(t);return(e=n==null?void 0:n.$el)!=null?e:n}const L=h?window:void 0,D=h?window.navigator:void 0;function W(...t){let e,n,u,f;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,u,f]=t,e=L):[e,n,u,f]=t,!e)return C;Array.isArray(n)||(n=[n]),Array.isArray(u)||(u=[u]);const v=[],i=()=>{v.forEach(a=>a()),v.length=0},m=(a,c,d,p)=>(a.addEventListener(c,d,p),()=>a.removeEventListener(c,d,p)),s=S(()=>[_(e),g(f)],([a,c])=>{i(),a&&v.push(...n.flatMap(d=>u.map(p=>m(a,d,p,c))))},{immediate:!0,flush:"post"}),l=()=>{s(),i()};return E(l),l}function j(){const t=y(!1);return M()&&T(()=>{t.value=!0}),t}function k(t){const e=j();return w(()=>(e.value,!!t()))}function F(t={}){const{navigator:e=D,read:n=!1,source:u,copiedDuring:f=1500,legacy:v=!1}=t,i=k(()=>e&&"clipboard"in e),m=w(()=>i.value||v),s=y(""),l=y(!1),a=A(()=>l.value=!1,f);function c(){i.value?e.clipboard.readText().then(o=>{s.value=o}):s.value=x()}m.value&&n&&W(["copy","cut"],c);async function d(o=g(u)){m.value&&o!=null&&(i.value?await e.clipboard.writeText(o):p(o),s.value=o,l.value=!0,a.start())}function p(o){const r=document.createElement("textarea");r.value=o??"",r.style.position="absolute",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),r.remove()}function x(){var o,r,b;return(b=(r=(o=document==null?void 0:document.getSelection)==null?void 0:o.call(document))==null?void 0:r.toString())!=null?b:""}return{isSupported:m,text:s,copied:l,copy:d}}export{F as a,W as u};
