// ROLLUP_NO_REPLACE 
 const _13_Safety_____ = "{\"parsed\":{\"_path\":\"/blog/safety\",\"_dir\":\"blog\",\"_draft\":false,\"_partial\":false,\"_locale\":\"\",\"_empty\":false,\"title\":\"Safety 网络安全\",\"description\":\"全称 Safety 网络安全\",\"date\":\"2023-08-02T22:57:29.000Z\",\"url\":null,\"en-title\":\"Safety 网络安全\",\"tags\":[\"Safety\"],\"body\":{\"type\":\"root\",\"children\":[{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"全称 Safety 网络安全\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"strong\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"Table of Contents\"}]},{\"type\":\"text\",\"value\":\"  \"},{\"type\":\"element\",\"tag\":\"em\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"generated with \"},{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"https://github.com/thlorenz/doctoc\",\"rel\":[\"nofollow\"]},\"children\":[{\"type\":\"text\",\"value\":\"DocToc\"}]}]}]},{\"type\":\"element\",\"tag\":\"ul\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#xss\"},\"children\":[{\"type\":\"text\",\"value\":\"XSS\"}]},{\"type\":\"element\",\"tag\":\"ul\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#%E5%A6%82%E4%BD%95%E6%94%BB%E5%87%BB\"},\"children\":[{\"type\":\"text\",\"value\":\"如何攻击\"}]}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#%E5%A6%82%E4%BD%95%E9%98%B2%E5%BE%A1\"},\"children\":[{\"type\":\"text\",\"value\":\"如何防御\"}]}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#csp\"},\"children\":[{\"type\":\"text\",\"value\":\"CSP\"}]}]}]}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#csrf\"},\"children\":[{\"type\":\"text\",\"value\":\"CSRF\"}]},{\"type\":\"element\",\"tag\":\"ul\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#%E5%A6%82%E4%BD%95%E6%94%BB%E5%87%BB-1\"},\"children\":[{\"type\":\"text\",\"value\":\"如何攻击\"}]}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#%E5%A6%82%E4%BD%95%E9%98%B2%E5%BE%A1-1\"},\"children\":[{\"type\":\"text\",\"value\":\"如何防御\"}]},{\"type\":\"element\",\"tag\":\"ul\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#samesite\"},\"children\":[{\"type\":\"text\",\"value\":\"SameSite\"}]}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#%E9%AA%8C%E8%AF%81-referer\"},\"children\":[{\"type\":\"text\",\"value\":\"验证 Referer\"}]}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#token\"},\"children\":[{\"type\":\"text\",\"value\":\"Token\"}]}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#%E5%AF%86%E7%A0%81%E5%AE%89%E5%85%A8\"},\"children\":[{\"type\":\"text\",\"value\":\"密码安全\"}]},{\"type\":\"element\",\"tag\":\"ul\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"#%E5%8A%A0%E7%9B%90\"},\"children\":[{\"type\":\"text\",\"value\":\"加盐\"}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"h2\",\"props\":{\"id\":\"xss\"},\"children\":[{\"type\":\"text\",\"value\":\"XSS\"}]},{\"type\":\"element\",\"tag\":\"blockquote\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"strong\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"跨网站指令码\"}]},{\"type\":\"text\",\"value\":\"（英语：Cross-site scripting，通常简称为：XSS）是一种网站应用程式的安全漏洞攻击，是\"},{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"https://www.wikiwand.com/zh-hans/%E4%BB%A3%E7%A2%BC%E6%B3%A8%E5%85%A5\",\"rel\":[\"nofollow\"]},\"children\":[{\"type\":\"text\",\"value\":\"代码注入\"}]},{\"type\":\"text\",\"value\":\"的一种。它允许恶意使用者将程式码注入到网页上，其他使用者在观看网页时就会受到影响。这类攻击通常包含了 HTML 以及使用者端脚本语言。\"}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"XSS 分为三种：反射型，存储型和 DOM-based\"}]},{\"type\":\"element\",\"tag\":\"h3\",\"props\":{\"id\":\"如何攻击\"},\"children\":[{\"type\":\"text\",\"value\":\"如何攻击\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"XSS 通过修改 HTML 节点或者执行 JS 代码来攻击网站。\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"例如通过 URL 获取某些参数\"}]},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-html\"],\"code\":\"<!-- http://www.domain.com?name=<script>alert(1)</script> -->\\n<div>{{name}}</div>                                                  \\n\",\"language\":\"html\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-396545\"},\"children\":[{\"type\":\"text\",\"value\":\"<!-- http://www.domain.com?name=<script>alert(1)</script> -->\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":2},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"<\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"div\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\">\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"{{name}}\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"</\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"div\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\">\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"                                                  \"}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"上述 URL 输入可能会将 HTML 改为 \"},{\"type\":\"element\",\"tag\":\"code-inline\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"<div><script>alert(1)</script></div>\"}]},{\"type\":\"text\",\"value\":\" ，这样页面中就凭空多了一段可执行脚本。这种攻击类型是反射型攻击，也可以说是 DOM-based 攻击。\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"也有另一种场景，比如写了一篇包含攻击代码 \"},{\"type\":\"element\",\"tag\":\"code-inline\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"<script>alert(1)</script>\"}]},{\"type\":\"text\",\"value\":\" 的文章，那么可能浏览文章的用户都会被攻击到。这种攻击类型是存储型攻击，也可以说是 DOM-based 攻击，并且这种攻击打击面更广。\"}]},{\"type\":\"element\",\"tag\":\"h3\",\"props\":{\"id\":\"如何防御\"},\"children\":[{\"type\":\"text\",\"value\":\"如何防御\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"最普遍的做法是转义输入输出的内容，对于引号，尖括号，斜杠进行转义\"}]},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-js\"],\"code\":\"function escape(str) {\\n    str = str.replace(/&/g, \\\"&amp;\\\");\\n    str = str.replace(/</g, \\\"&lt;\\\");\\n    str = str.replace(/>/g, \\\"&gt;\\\");\\n    str = str.replace(/\\\"/g, \\\"&quto;\\\");\\n    str = str.replace(/'/g, \\\"&#39;\\\");\\n    str = str.replace(/`/g, \\\"&#96;\\\");\\n    str = str.replace(/\\\\//g, \\\"&#x2F;\\\");\\n    return str\\n}\\n\",\"language\":\"js\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-884588\"},\"children\":[{\"type\":\"text\",\"value\":\"function\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"escape\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-741517\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\")\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"{\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":2},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"    \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-960789\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\".\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"replace\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-801499\"},\"children\":[{\"type\":\"text\",\"value\":\"&\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"g\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\",\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"&amp;\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":3},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"    \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-960789\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\".\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"replace\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-801499\"},\"children\":[{\"type\":\"text\",\"value\":\"<\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"g\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\",\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"&lt;\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":4},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"    \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-960789\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\".\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"replace\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-801499\"},\"children\":[{\"type\":\"text\",\"value\":\">\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"g\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\",\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"&gt;\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":5},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"    \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-960789\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\".\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"replace\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-801499\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"g\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\",\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"&quto;\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":6},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"    \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-960789\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\".\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"replace\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-801499\"},\"children\":[{\"type\":\"text\",\"value\":\"'\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"g\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\",\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"&#39;\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":7},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"    \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-960789\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\".\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"replace\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-801499\"},\"children\":[{\"type\":\"text\",\"value\":\"`\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"g\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\",\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"&#96;\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":8},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"    \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-960789\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\".\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"replace\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-311552\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\\/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"/\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"g\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\",\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"&#x2F;\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":9},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"    \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"return\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"str\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":10},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"}\"}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"通过转义可以将攻击代码 \"},{\"type\":\"element\",\"tag\":\"code-inline\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"<script>alert(1)</script>\"}]},{\"type\":\"text\",\"value\":\" 变成\"}]},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-js\"],\"code\":\"// -> &lt;script&gt;alert(1)&lt;&#x2F;script&gt;\\nescape('<script>alert(1)</script>')\\n\",\"language\":\"js\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-396545\"},\"children\":[{\"type\":\"text\",\"value\":\"// -> &lt;script&gt;alert(1)&lt;&#x2F;script&gt;\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":2},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"escape\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"'\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"<script>alert(1)</script>\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"'\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\")\"}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"对于显示富文本来说，不能通过上面的办法来转义所有字符，因为这样会把需要的格式也过滤掉。这种情况通常采用白名单过滤的办法，当然也可以通过黑名单过滤，但是考虑到需要过滤的标签和标签属性实在太多，更加推荐使用白名单的方式。\"}]},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-js\"],\"code\":\"var xss = require(\\\"xss\\\");\\nvar html = xss('<h1 id=\\\"title\\\">XSS Demo</h1><script>alert(\\\"xss\\\");</script>');\\n// -> <h1>XSS Demo</h1>&lt;script&gt;alert(\\\"xss\\\");&lt;/script&gt;\\nconsole.log(html);\\n\",\"language\":\"js\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-884588\"},\"children\":[{\"type\":\"text\",\"value\":\"var\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"xss\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-960789\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"require\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"xss\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":2},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-884588\"},\"children\":[{\"type\":\"text\",\"value\":\"var\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"html\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-960789\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"xss\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"'\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"<h1 id=\\\"title\\\">XSS Demo</h1><script>alert(\\\"xss\\\");</script>\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"'\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":3},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-396545\"},\"children\":[{\"type\":\"text\",\"value\":\"// -> <h1>XSS Demo</h1>&lt;script&gt;alert(\\\"xss\\\");&lt;/script&gt;\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":4},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"console\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\".\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"log\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"html\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\");\"}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"以上示例使用了 \"},{\"type\":\"element\",\"tag\":\"code-inline\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"js-xss\"}]},{\"type\":\"text\",\"value\":\" 来实现。可以看到在输出中保留了 \"},{\"type\":\"element\",\"tag\":\"code-inline\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"h1\"}]},{\"type\":\"text\",\"value\":\" 标签且过滤了 \"},{\"type\":\"element\",\"tag\":\"code-inline\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"script\"}]},{\"type\":\"text\",\"value\":\" 标签\"}]},{\"type\":\"element\",\"tag\":\"h3\",\"props\":{\"id\":\"csp\"},\"children\":[{\"type\":\"text\",\"value\":\"CSP\"}]},{\"type\":\"element\",\"tag\":\"blockquote\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"内容安全策略   (\"},{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"https://developer.mozilla.org/en-US/docs/Glossary/CSP\",\"rel\":[\"nofollow\"]},\"children\":[{\"type\":\"text\",\"value\":\"CSP\"}]},{\"type\":\"text\",\"value\":\") 是一个额外的安全层，用于检测并削弱某些特定类型的攻击，包括跨站脚本 (\"},{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"https://developer.mozilla.org/en-US/docs/Glossary/XSS\",\"rel\":[\"nofollow\"]},\"children\":[{\"type\":\"text\",\"value\":\"XSS\"}]},{\"type\":\"text\",\"value\":\") 和数据注入攻击等。无论是数据盗取、网站内容污染还是散发恶意软件，这些攻击都是主要的手段。\"}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"我们可以通过 CSP 来尽量减少 XSS 攻击。CSP 本质上也是建立白名单，规定了浏览器只能够执行特定来源的代码。\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"通常可以通过 HTTP Header 中的 \"},{\"type\":\"element\",\"tag\":\"code-inline\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"Content-Security-Policy\"}]},{\"type\":\"text\",\"value\":\" 来开启 CSP\"}]},{\"type\":\"element\",\"tag\":\"ul\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"只允许加载本站资源\"},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-http\"],\"code\":\"Content-Security-Policy: default-src ‘self’\\n\",\"language\":\"http\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"Content-Security-Policy:\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"default-src ‘self’\"}]}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"只允许加载 HTTPS 协议图片\"},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-http\"],\"code\":\"Content-Security-Policy: img-src https://*\\n\",\"language\":\"http\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"Content-Security-Policy:\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"img-src https://*\"}]}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"允许加载任何来源框架\"},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-http\"],\"code\":\"Content-Security-Policy: child-src 'none'\\n\",\"language\":\"http\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"Content-Security-Policy:\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"child-src 'none'\"}]}]}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"更多属性可以查看 \"},{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"https://content-security-policy.com/\",\"rel\":[\"nofollow\"]},\"children\":[{\"type\":\"text\",\"value\":\"这里\"}]}]},{\"type\":\"element\",\"tag\":\"h2\",\"props\":{\"id\":\"csrf\"},\"children\":[{\"type\":\"text\",\"value\":\"CSRF\"}]},{\"type\":\"element\",\"tag\":\"blockquote\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"strong\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"跨站请求伪造\"}]},{\"type\":\"text\",\"value\":\"（英语：Cross-site request forgery），也被称为 \"},{\"type\":\"element\",\"tag\":\"strong\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"one-click attack\"}]},{\"type\":\"text\",\"value\":\" 或者 \"},{\"type\":\"element\",\"tag\":\"strong\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"session riding\"}]},{\"type\":\"text\",\"value\":\"，通常缩写为 \"},{\"type\":\"element\",\"tag\":\"strong\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"CSRF\"}]},{\"type\":\"text\",\"value\":\" 或者 \"},{\"type\":\"element\",\"tag\":\"strong\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"XSRF\"}]},{\"type\":\"text\",\"value\":\"， 是一种挟制用户在当前已登录的Web应用程序上执行非本意的操作的攻击方法。[\"},{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"https://www.wikiwand.com/zh/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0#citenoteRistic1\",\"rel\":[\"nofollow\"]},\"children\":[{\"type\":\"text\",\"value\":\"1]\"}]},{\"type\":\"text\",\"value\":\" 跟\"},{\"type\":\"element\",\"tag\":\"a\",\"props\":{\"href\":\"https://www.wikiwand.com/zh/%E8%B7%A8%E7%B6%B2%E7%AB%99%E6%8C%87%E4%BB%A4%E7%A2%BC\",\"rel\":[\"nofollow\"]},\"children\":[{\"type\":\"text\",\"value\":\"跨網站指令碼\"}]},{\"type\":\"text\",\"value\":\"（XSS）相比，\"},{\"type\":\"element\",\"tag\":\"strong\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"XSS\"}]},{\"type\":\"text\",\"value\":\" 利用的是用户对指定网站的信任，CSRF 利用的是网站对用户网页浏览器的信任。\"}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"简单点说，CSRF 就是利用用户的登录态发起恶意请求。\"}]},{\"type\":\"element\",\"tag\":\"h3\",\"props\":{\"id\":\"如何攻击-1\"},\"children\":[{\"type\":\"text\",\"value\":\"如何攻击\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"假设网站中有一个通过 Get 请求提交用户评论的接口，那么攻击者就可以在钓鱼网站中加入一个图片，图片的地址就是评论接口\"}]},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-html\"],\"code\":\"<img src=\\\"http://www.domain.com/xxx?comment='attack'\\\"/>\\n\",\"language\":\"html\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"<\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"img\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-683480\"},\"children\":[{\"type\":\"text\",\"value\":\"src\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"http://www.domain.com/xxx?comment='attack'\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"/>\"}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"如果接口是 Post 提交的，就相对麻烦点，需要用表单来提交接口\"}]},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-html\"],\"code\":\"<form action=\\\"http://www.domain.com/xxx\\\" id=\\\"CSRF\\\" method=\\\"post\\\">\\n    <input name=\\\"comment\\\" value=\\\"attack\\\" type=\\\"hidden\\\">\\n</form>\\n\",\"language\":\"html\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"<\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"form\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-683480\"},\"children\":[{\"type\":\"text\",\"value\":\"action\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"http://www.domain.com/xxx\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-683480\"},\"children\":[{\"type\":\"text\",\"value\":\"id\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"CSRF\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-683480\"},\"children\":[{\"type\":\"text\",\"value\":\"method\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"post\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\">\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":2},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\"    \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"<\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"input\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-683480\"},\"children\":[{\"type\":\"text\",\"value\":\"name\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"comment\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-683480\"},\"children\":[{\"type\":\"text\",\"value\":\"value\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"attack\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-683480\"},\"children\":[{\"type\":\"text\",\"value\":\"type\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"=\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-213557\"},\"children\":[{\"type\":\"text\",\"value\":\"hidden\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-929333\"},\"children\":[{\"type\":\"text\",\"value\":\"\\\"\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\">\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":3},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"</\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-938761\"},\"children\":[{\"type\":\"text\",\"value\":\"form\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\">\"}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"h3\",\"props\":{\"id\":\"如何防御-1\"},\"children\":[{\"type\":\"text\",\"value\":\"如何防御\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"防范 CSRF 可以遵循以下几种规则：\"}]},{\"type\":\"element\",\"tag\":\"ol\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"Get 请求不对数据进行修改\"}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"不让第三方网站访问到用户 Cookie\"}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"阻止第三方网站请求接口\"}]},{\"type\":\"element\",\"tag\":\"li\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"请求时附带验证信息，比如验证码或者 token\"}]}]},{\"type\":\"element\",\"tag\":\"h4\",\"props\":{\"id\":\"samesite\"},\"children\":[{\"type\":\"text\",\"value\":\"SameSite\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"可以对 Cookie 设置 \"},{\"type\":\"element\",\"tag\":\"code-inline\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"SameSite\"}]},{\"type\":\"text\",\"value\":\" 属性。该属性设置 Cookie 不随着跨域请求发送，该属性可以很大程度减少 CSRF 的攻击，但是该属性目前并不是所有浏览器都兼容。\"}]},{\"type\":\"element\",\"tag\":\"h4\",\"props\":{\"id\":\"验证-referer\"},\"children\":[{\"type\":\"text\",\"value\":\"验证 Referer\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"对于需要防范 CSRF 的请求，我们可以通过验证 Referer 来判断该请求是否为第三方网站发起的。\"}]},{\"type\":\"element\",\"tag\":\"h4\",\"props\":{\"id\":\"token\"},\"children\":[{\"type\":\"text\",\"value\":\"Token\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"服务器下发一个随机 Token（算法不能复杂），每次发起请求时将 Token 携带上，服务器验证 Token 是否有效。\"}]},{\"type\":\"element\",\"tag\":\"h2\",\"props\":{\"id\":\"密码安全\"},\"children\":[{\"type\":\"text\",\"value\":\"密码安全\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"密码安全虽然大多是后端的事情，但是作为一名优秀的前端程序员也需要熟悉这方面的知识。\"}]},{\"type\":\"element\",\"tag\":\"h3\",\"props\":{\"id\":\"加盐\"},\"children\":[{\"type\":\"text\",\"value\":\"加盐\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"对于密码存储来说，必然是不能明文存储在数据库中的，否则一旦数据库泄露，会对用户造成很大的损失。并且不建议只对密码单纯通过加密算法加密，因为存在彩虹表的关系。\"}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"通常需要对密码加盐，然后进行几次不同加密算法的加密。\"}]},{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"className\":[\"language-js\"],\"code\":\"// 加盐也就是给原密码添加字符串，增加原密码长度\\nsha256(sha1(md5(salt + password + salt)))\\n\",\"language\":\"js\",\"meta\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"pre\",\"props\":{},\"children\":[{\"type\":\"element\",\"tag\":\"code\",\"props\":{\"__ignoreMap\":\"\"},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":1},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-396545\"},\"children\":[{\"type\":\"text\",\"value\":\"// 加盐也就是给原密码添加字符串，增加原密码长度\\n\"}]}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"line\",\"line\":2},\"children\":[{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"sha256\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"sha1\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-940853\"},\"children\":[{\"type\":\"text\",\"value\":\"md5\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\"(\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"salt\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-202223\"},\"children\":[{\"type\":\"text\",\"value\":\"+\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"password\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-202223\"},\"children\":[{\"type\":\"text\",\"value\":\"+\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-691885\"},\"children\":[{\"type\":\"text\",\"value\":\" \"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-753171\"},\"children\":[{\"type\":\"text\",\"value\":\"salt\"}]},{\"type\":\"element\",\"tag\":\"span\",\"props\":{\"class\":\"ct-876055\"},\"children\":[{\"type\":\"text\",\"value\":\")))\"}]}]}]}]}]},{\"type\":\"element\",\"tag\":\"p\",\"props\":{},\"children\":[{\"type\":\"text\",\"value\":\"但是加盐并不能阻止别人盗取账号，只能确保即使数据库泄露，也不会暴露用户的真实密码。一旦攻击者得到了用户的账号，可以通过暴力破解的方式破解密码。对于这种情况，通常使用验证码增加延时或者限制尝试次数的方式。并且一旦用户输入了错误的密码，也不能直接提示用户输错密码，而应该提示账号或密码错误。\"}]},{\"type\":\"element\",\"tag\":\"style\",\"children\":[{\"type\":\"text\",\"value\":\".ct-396545{color:#A0ADA0;}\\n.dark .ct-396545{color:#758575DD;}\\n.sepia .ct-396545{color:#88846F;}\\n.ct-876055{color:#999999;}\\n.dark .ct-876055{color:#666666;}\\n.sepia .ct-876055{color:#F8F8F2;}\\n.ct-938761{color:#1E754F;}\\n.dark .ct-938761{color:#4D9375;}\\n.sepia .ct-938761{color:#F92672;}\\n.ct-691885{color:#393A34;}\\n.dark .ct-691885{color:#DBD7CAEE;}\\n.sepia .ct-691885{color:#F8F8F2;}\\n.ct-884588{color:#AB5959;}\\n.dark .ct-884588{color:#CB7676;}\\n.sepia .ct-884588{color:#66D9EF;font-style:italic;}\\n.ct-940853{color:#59873A;}\\n.dark .ct-940853{color:#80A665;}\\n.sepia .ct-940853{color:#A6E22E;}\\n.ct-741517{color:#B07D48;}\\n.dark .ct-741517{color:#BD976A;}\\n.sepia .ct-741517{color:#FD971F;font-style:italic;}\\n.ct-753171{color:#B07D48;}\\n.dark .ct-753171{color:#BD976A;}\\n.sepia .ct-753171{color:#F8F8F2;}\\n.ct-960789{color:#999999;}\\n.dark .ct-960789{color:#666666;}\\n.sepia .ct-960789{color:#F92672;}\\n.ct-929333{color:#B5695999;}\\n.dark .ct-929333{color:#C98A7D99;}\\n.sepia .ct-929333{color:#E6DB74;}\\n.ct-801499{color:#AB5E3F;}\\n.dark .ct-801499{color:#C4704F;}\\n.sepia .ct-801499{color:#E6DB74;}\\n.ct-213557{color:#B56959;}\\n.dark .ct-213557{color:#C98A7D;}\\n.sepia .ct-213557{color:#E6DB74;}\\n.ct-311552{color:#BDA437;}\\n.dark .ct-311552{color:#E6CC77;}\\n.sepia .ct-311552{color:#AE81FF;}\\n.ct-683480{color:#B07D48;}\\n.dark .ct-683480{color:#BD976A;}\\n.sepia .ct-683480{color:#A6E22E;}\\n.ct-202223{color:#AB5959;}\\n.dark .ct-202223{color:#CB7676;}\\n.sepia .ct-202223{color:#F92672;}\"}]}],\"toc\":{\"title\":\"\",\"searchDepth\":2,\"depth\":2,\"links\":[{\"id\":\"xss\",\"depth\":2,\"text\":\"XSS\",\"children\":[{\"id\":\"如何攻击\",\"depth\":3,\"text\":\"如何攻击\"},{\"id\":\"如何防御\",\"depth\":3,\"text\":\"如何防御\"},{\"id\":\"csp\",\"depth\":3,\"text\":\"CSP\"}]},{\"id\":\"csrf\",\"depth\":2,\"text\":\"CSRF\",\"children\":[{\"id\":\"如何攻击-1\",\"depth\":3,\"text\":\"如何攻击\"},{\"id\":\"如何防御-1\",\"depth\":3,\"text\":\"如何防御\"}]},{\"id\":\"密码安全\",\"depth\":2,\"text\":\"密码安全\",\"children\":[{\"id\":\"加盐\",\"depth\":3,\"text\":\"加盐\"}]}]}},\"_type\":\"markdown\",\"_id\":\"content:blog:13.Safety 网络安全.md\",\"_source\":\"content\",\"_file\":\"blog/13.Safety 网络安全.md\",\"_extension\":\"md\"},\"hash\":\"WP751g1cfC\"}";

export { _13_Safety_____ as default };
//# sourceMappingURL=13.Safety 网络安全.mjs.map
